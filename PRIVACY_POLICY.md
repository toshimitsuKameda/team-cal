# プライバシーポリシー

**最終更新日: 2025年10月1日**

## はじめに

Team Calendar Switcher（以下「本拡張機能」）は、Googleカレンダーと連携してチームのカレンダーを簡単に切り替えられるChrome拡張機能です。本プライバシーポリシーは、本拡張機能がどのようにデータを収集、使用、保護するかを説明します。

## データの収集と使用

### 収集するデータ

本拡張機能は、以下のデータを収集・使用します:

1. **Googleアカウント情報**
   - メールアドレス
   - 目的: ユーザー認証とカレンダーアクセスの識別

2. **Googleカレンダーデータ**
   - カレンダーのリスト（カレンダー名、ID）
   - 空き/予定あり情報（Free/Busy情報）
   - 目的: チームメンバーの空き状況を表示

3. **ユーザー設定**
   - チーム名
   - チームメンバーのメールアドレスとニックネーム
   - 目的: ユーザーが作成したチーム設定の保存

### データの保存場所

- **ローカルストレージ**: チーム設定は`chrome.storage.sync`に保存されます（Googleアカウントに紐づいて同期）
- **メモリキャッシュ**: 空き/予定あり情報は一時的にブラウザのメモリにキャッシュされます（最大60秒、ページリロードで消去）
- **外部サーバー**: 本拡張機能は独自のサーバーを使用せず、すべての処理はブラウザ内で完結します

## データの使用目的

収集したデータは以下の目的でのみ使用されます:

1. チームメンバーのカレンダー空き状況の表示
2. カレンダーの自動切り替え機能の提供
3. チーム設定の保存と同期
4. 拡張機能の動作に必要な認証処理

## データの共有

本拡張機能は、収集したデータを以下の通り扱います:

- ✅ **第三者への共有なし**: 収集したデータは第三者と共有されません
- ✅ **外部送信なし**: データは外部サーバーに送信されません
- ✅ **Google API経由のみ**: カレンダーデータへのアクセスはGoogle Calendar API経由でのみ行われます
- ✅ **ブラウザ内処理**: すべてのデータ処理はユーザーのブラウザ内で完結します

## 必要な権限

本拡張機能は以下の権限を要求します:

### 1. `identity`
- **目的**: Google OAuth認証を使用してGoogleアカウントにログイン
- **使用方法**: ユーザーの同意を得てアクセストークンを取得

### 2. `storage`
- **目的**: チーム設定の保存
- **使用方法**: `chrome.storage.sync`にチーム設定を保存し、デバイス間で同期

### 3. `tabs`
- **目的**: Googleカレンダーのタブと連携
- **使用方法**: カレンダーページでの拡張機能の動作に必要

### 4. Host Permissions: `https://www.googleapis.com/*`
- **目的**: Google Calendar APIへのアクセス
- **使用方法**: カレンダーデータの取得と更新

### 5. Host Permissions: `https://calendar.google.com/*`
- **目的**: Googleカレンダーページでの拡張機能の表示
- **使用方法**: カレンダーページにUIを挿入

## OAuth スコープ

本拡張機能は以下のOAuthスコープを要求します:

### 1. `https://www.googleapis.com/auth/calendar`
- **目的**: カレンダーの表示/非表示の切り替え
- **詳細**: チーム切り替え時にメンバーのカレンダーを自動的に表示

### 2. `https://www.googleapis.com/auth/calendar.freebusy`
- **目的**: 空き/予定あり情報の取得
- **詳細**: チームメンバーの空き状況を表示するヒートマップの生成

### 3. `https://www.googleapis.com/auth/userinfo.email`
- **目的**: ユーザーのメールアドレスの取得
- **詳細**: ユーザー認証の識別

## データのセキュリティ

本拡張機能は、以下のセキュリティ対策を実施しています:

- **HTTPS通信**: すべてのAPI通信は暗号化されたHTTPS経由で行われます
- **トークンの安全な管理**: OAuthトークンはChromeのセキュアストレージに保存されます
- **最小権限の原則**: 必要最小限の権限とスコープのみを要求します
- **定期的なセキュリティレビュー**: コードの定期的なセキュリティ監査を実施します

## データの保持期間

- **チーム設定**: ユーザーが拡張機能をアンインストールするまで保持
- **空き/予定あり情報のキャッシュ**: 最大60秒間保持（自動的に期限切れ）
- **認証トークン**: ユーザーがログアウトまたは拡張機能をアンインストールするまで保持

## ユーザーの権利

ユーザーは以下の権利を有します:

### データの削除
以下の方法でデータを削除できます:

1. **チーム設定の削除**:
   - 拡張機能のUIからチームを個別に削除
   
2. **すべてのデータの削除**:
   - `chrome://extensions/`で拡張機能の「データを削除」をクリック
   - または、拡張機能をアンインストール

### アクセス権限の取り消し
以下の方法でアクセス権限を取り消せます:

1. [Googleアカウントのセキュリティページ](https://myaccount.google.com/permissions)にアクセス
2. "Team Calendar"を探してクリック
3. "アクセス権を削除"をクリック

## Cookieとトラッキング

本拡張機能は:

- ❌ Cookieを使用しません
- ❌ トラッキングを行いません
- ❌ 広告を表示しません
- ❌ アナリティクスを使用しません

## 子どもの個人情報

本拡張機能は、13歳未満の子どもから意図的に個人情報を収集しません。

## プライバシーポリシーの変更

本プライバシーポリシーは、必要に応じて更新される場合があります。重大な変更がある場合は、拡張機能の更新ノートでユーザーに通知します。

## お問い合わせ

プライバシーに関するご質問やご懸念がある場合は、以下までご連絡ください:

**連絡先**: [your-email@yourcompany.com]

---

## 技術的な詳細（開発者向け）

### データフロー

```
ユーザー
  ↓
Chrome拡張機能
  ↓
Google Calendar API (HTTPS)
  ↓
ブラウザのメモリ/ストレージ
```

### ストレージの内容例

```json
{
  "teams": [
    {
      "id": "uuid-v4",
      "name": "開発チーム",
      "members": [
        {
          "email": "user@example.com",
          "nickname": "山田太郎"
        }
      ]
    }
  ]
}
```

### キャッシュの実装

```typescript
// TTL: 60秒
const cache = new Map<string, {
  data: FreeBusyData,
  timestamp: number
}>();
```

---

**本プライバシーポリシーに同意することで、上記の内容を理解し、受け入れたものとみなされます。**

