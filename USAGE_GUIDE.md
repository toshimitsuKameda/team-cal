# Team Calendar 使い方ガイド

## 基本的な使い方

### 1. 初回セットアップ

#### ステップ1: 認証
1. サイドパネルを開く
2. 「Googleでログイン」ボタンをクリック
3. Googleアカウントでログイン
4. 必要な権限を許可

#### ステップ2: 最初のチームを作成
1. `+` ボタンをクリック
2. チーム名を入力（例：「営業本部」）
3. メンバーを追加
   ```
   yamada@example.com,山田太郎
   tanaka@example.com,田中花子
   suzuki@example.com,鈴木一郎
   ```
4. 「保存」をクリック

### 2. チーム切り替えとカレンダー同期

#### チームを切り替える
- ピル型ボタンをクリックして別のチームを選択
- 自動的に以下の処理が実行されます：
  1. 前のチームのカレンダーを非表示
  2. 新しいチームのカレンダーを表示
  3. Free/Busy情報を取得

#### 同期中の表示
- 「カレンダーを同期中...」メッセージが表示されます
- 通常3-5秒で完了します

### 3. 空き状況の確認

#### ヒートマップの見方
| 色 | 意味 | 説明 |
|----|------|------|
| 🟢 緑 | 空き | ほとんどのメンバーが空いています |
| 🟡 黄 | 一部予定あり | 30-60%のメンバーに予定があります |
| 🟠 オレンジ | 多数予定あり | 60-80%のメンバーに予定があります |
| 🔴 赤 | 全員予定あり | 80%以上のメンバーに予定があります |

#### 時間範囲の切り替え
- **今日**: 本日の予定を表示
- **今週**: 月-金（平日のみ）
- **来週**: 来週の月-金

#### 粒度の調整
- **15分**: 短時間の打ち合わせに最適
- **30分**: 標準的な会議時間
- **60分**: 長時間の会議や作業時間

### 4. おすすめ時間帯の活用

#### トップ3候補
ヒートマップの下に、最も多くのメンバーが空いている時間帯が表示されます。

各候補には以下の情報が含まれます：
- 🕒 **時間帯**: 開始時刻-終了時刻
- ✅ **空きメンバー数**: X人が空いています
- ❌ **予定ありメンバー数**: Y人に予定があります

### 5. 会議の予定を作成

#### 方法1: Googleカレンダーで作成
1. おすすめ時間帯を確認
2. Googleカレンダーを開く
3. メンバーのカレンダーが既に表示されています
4. おすすめ時間帯に予定を作成
5. チームメンバーを招待

#### 方法2: サイドパネルから直接開く
1. おすすめ時間帯の時刻をメモ
2. Googleカレンダーでその時刻をクリック
3. 予定を作成してメンバーを招待

## 高度な使い方

### 複数チームの管理

#### チームの編集
1. チームを選択
2. ⚙️（歯車）ボタンをクリック
3. メンバーを追加・削除
4. 「保存」をクリック

#### チームの削除
1. チームを選択
2. ⚙️（歯車）ボタンをクリック
3. 「削除」ボタンをクリック
4. 確認ダイアログで「OK」

### カレンダー権限について

#### アクセスできないメンバーがいる場合
画面に警告が表示されます：
```
⚠️ X人のカレンダーにアクセスできません
```

**原因:**
- メンバーがカレンダーを共有していない
- メンバーのGoogleアカウントが存在しない

**対処法:**
1. メンバーにカレンダー共有を依頼
2. Google Workspace管理者に相談
3. Free/Busy情報のみ共有を設定

#### Free/Busy共有の設定（メンバー側）
1. Googleカレンダーを開く
2. 設定 > カレンダーの共有設定
3. 「予定の時間枠のみを表示（詳細は非表示）」を選択
4. 組織全体に共有

## トラブルシューティング

### カレンダーが表示されない

**症状**: チームを切り替えてもGoogleカレンダーに表示されない

**対処法:**
1. Googleカレンダーのページをリロード
2. 「他のカレンダー」セクションを確認
3. メンバーのメールアドレスが正しいか確認

### 同期が遅い

**症状**: 「カレンダーを同期中...」が長時間表示される

**対処法:**
1. メンバー数が多い場合は通常10-15秒かかります
2. ネットワーク接続を確認
3. 拡張機能をリロード
4. それでも解決しない場合は、拡張機能を再インストール

### 権限エラー

**症状**: 「認証が必要です」というメッセージ

**対処法:**
1. 「Googleでログイン」をクリック
2. 必要な権限を全て許可
3. Chrome拡張機能の権限設定を確認

### データが消えた

**症状**: 作成したチームが表示されない

**原因**: `chrome.storage.sync`の同期遅延

**対処法:**
1. 数分待って自動同期を待つ
2. 別のデバイスでログインしている場合は同期を確認
3. 最悪の場合、チームを再作成

## ベストプラクティス

### チーム構成
- **小規模チーム**: 3-10人が最適
- **中規模チーム**: 10-30人まで対応
- **大規模チーム**: 30人以上は分割を推奨

### 命名規則
チーム名は以下のように設定すると管理しやすいです：
- `営業本部 - 東京`
- `開発チーム - フロントエンド`
- `マーケティング - 企画`

### 更新頻度
- **毎朝**: 今日の空き状況を確認
- **週初め**: 今週の会議候補時間を確認
- **金曜日**: 来週の予定を計画

### カレンダーの整理
前のチームのカレンダーが残っている場合：
1. Googleカレンダーの「他のカレンダー」を確認
2. 不要なカレンダーのチェックを外す
3. または完全に削除（購読解除）

## ショートカット

| アクション | 方法 |
|----------|------|
| チーム切り替え | ピルボタンをクリック |
| チーム作成 | `+` ボタン |
| チーム編集 | ⚙️ ボタン |
| 今日の予定 | 「今日」ボタン |
| 今週の予定 | 「今週」ボタン |
| 来週の予定 | 「来週」ボタン |

## よくある質問（FAQ）

### Q: 予定の詳細は表示されますか？
A: いいえ、Free/Busy情報のみ表示されます。プライバシーを保護するため、予定のタイトルや詳細は表示されません。

### Q: モバイルで使えますか？
A: Chrome拡張機能はデスクトップのみですが、同期したカレンダーはモバイルのGoogleカレンダーアプリでも表示されます。

### Q: 他の組織のメンバーを追加できますか？
A: はい、カレンダーが公開されている場合は追加できます。ただし、Free/Busy情報のみ取得できます。

### Q: チーム数の上限はありますか？
A: 技術的な上限はありませんが、10チーム以下を推奨します。

### Q: データはどこに保存されますか？
A: `chrome.storage.sync`に保存され、Googleアカウントで同期されます。

## サポート

問題が解決しない場合は、以下の情報と共にGitHub Issuesで報告してください：

1. Chrome拡張機能のバージョン
2. Chromeのバージョン
3. エラーメッセージ（あれば）
4. 再現手順
5. コンソールのエラーログ

---

**注意**: この拡張機能は、組織のセキュリティポリシーに準拠して使用してください。

